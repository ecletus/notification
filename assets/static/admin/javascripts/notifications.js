!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function n(i,o){this.$element=t(i),this.options=t.extend({},n.DEFAULTS,t.isPlainObject(o)&&o),this.init()}var i="qor.notification",o="enable."+i,e="disable."+i,a="undo.qor.action",r="notification",u=".qor-notifications__item",c=".qor-notifications__item-undo";return n.prototype={constructor:n,init:function(){this.bind()},bind:function(){this.$element.on(a,t.proxy(this.undo,this)),this.$element.on("click",".qor-notification__load-more",this.load_more)},load_more:function(n){var i=t(this);return i.text(i.data("loading")),t.get(i.attr("href"),function(n){var o=t(n).find(".qor-notifications");t(".qor-notifications--archived").length>0&&o.find(".qor-notifications--archived").remove(),i.replaceWith(o.html())}),!1},undo:function(i,o,e,a){var s,d=o.data(),f=d.undoType,l=o.closest(u),h=l.length?l:o.closest(c).prev(u);a.undoLabel=d.undoLabel,s=t(window.Mustache.render(n.UNDO_HTML,a)),!e&&s.find("button").data(d),f==r&&(h.before(a.notification),e?h.next(c).remove():h.after(s),h.remove())},unbind:function(){this.$element.off(a,this.undo)},destroy:function(){this.unbind(),this.$element.removeData(i)}},n.DEFAULTS={},n.UNDO_HTML='<div class="qor-notifications__item-undo"><span>[[message]]</span><button class="mdl-button mdl-button--colored qor-action-button is_undo" type="button" data-undo-type="notification">[[undoLabel]]</button></div>',n.plugin=function(o){return this.each(function(){var e,a=t(this),r=a.data(i);if(!r){if(/destroy/.test(o))return;a.data(i,r=new n(this,o))}"string"==typeof o&&t.isFunction(e=r[o])&&e.apply(r)})},t(function(){var i=".qor-notifications";t(document).on(e,function(o){n.plugin.call(t(i,o.target),"destroy")}).on(o,function(o){n.plugin.call(t(i,o.target))}).triggerHandler(o)}),n});